<!DOCTYPE html><!--if lt IE 8html.no-js.lt-ie9.lt-ie8(lang="en")--><!--if IE 8html.no-js.lt-ie9(lang="en")--><!--if gt IE 8html.no-js(lang="en")--><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Feature folders vs Tech folders | marisks # code</title><meta name="description" content="For several years using ASP.NET MVC we tend to organize our code by Models, Controllers, and Views. In EPiServer development, we also split it more - into Page types, View models, and other types. But lately, developers started to realize that it is hard to manage such codebase and started to organize the code by features. In this article, I will analyze both approaches using Dependency Structure Matrix."><meta name="keywords" content=".NET, ASP.NET, C#, JavaScript, Optimizely, EPiServer, programming languages"><meta name="viewport" content="width=device-width, initial-scale=1"><!--Place favicon.ico and apple-touch-icon.png in the root directory--><meta name="generator" content="DocPad v6.79.4" /><!-- Google Tag Manager--><script async src="https://www.googletagmanager.com/gtag/js?id=G-540M01NJGH"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-540M01NJGH');</script><!-- End Google Tag Manager--><link rel="icon" sizes="16x16 32x32" href="/favicon.ico?v=1"><link  rel="stylesheet" href="/css/vendor/normalize.css" /><link  rel="stylesheet" href="/css/vendor/main.css" /><link  rel="stylesheet" href="/css/vendor/bootstrap.min.css" /><link  rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" /><link  rel="stylesheet" href="/css/style.css" /><script src="/js/vendor/modernizr-2.6.2.min.js"></script></head><body><!-- Google Tag Manager--><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-WDKMR7" height="0" width="0" style="display: none; visibility: hidden;"></iframe></noscript><!-- End Google Tag Manager--><!--if lt IE 8p.browsehappy
    |You are using an
    strong
        |outdated browser
    |. Please
    a(href="http://browsehappy.com/")
        |upgrade your browser
    |to improve your experience.
--><div id="wrap"><div role="navigation" class="navbar navbar-ornament navbar-fixed-top"><div class="container"><div class="navbar-header"><a href="/" class="navbar-brand">marisks # code</a></div></div></div><div class="container"><div class="row"><div class="col-sm-8"><article><header><h1>Feature folders vs Tech folders</h1><p class="meta"><time datetime="2016-02-16T00:00:00.000Z">Tue Feb 16 2016</time></p></header><div class="lead">For several years using ASP.NET MVC we tend to organize our code by Models, Controllers, and Views. In EPiServer development, we also split it more - into Page types, View models, and other types. But lately, developers started to realize that it is hard to manage such codebase and started to organize the code by features. In this article, I will analyze both approaches using Dependency Structure Matrix.</div><h1 id="introduction">Introduction</h1>
<p><em>ASP.NET MVC</em> and <em>EPiServer CMS</em> <em>Visual Studio</em> templates by default split the code into <em>Models</em>, <em>Views</em>, <em>Controllers</em> folders and it leads most of the developers to use this style of code structuring. I&#39;ll call this approach as <em>Tech folders</em>. But there are other ways available.</p>
<p><em>ASP.NET MVC</em> provides  <a href="https://msdn.microsoft.com/en-us/library/ee671793%28v=vs.100%29.aspx?f=255&amp;MSPPError=-2147217396">Areas</a> support which can be used to organize your code by features. <em>EPiServer</em> code also can be organized using <em>Areas</em>. <a href="http://blog.tech-fellow.net/">Valdis Iljuconoks</a> has two articles about it - <a href="http://blog.tech-fellow.net/2015/01/21/full-support-for-asp-net-mvc-areas-in-episerver-7-5/">Full support for Asp.Net Mvc areas in EPiServer 7.5</a> and <a href="http://blog.tech-fellow.net/2015/08/10/asp-net-mvc-areas-in-episerver-part-2/">Asp.Net Mvc Areas in EPiServer - Part 2</a>.</p>
<p>Another approach is <em>Feature folders</em>.  There are quite a lot of articles which describes it:</p>
<ul>
<li><a href="http://timgthomas.com/2013/10/feature-folders-in-asp-net-mvc/">Feature Folders In ASP.NET MVC</a></li>
<li><a href="http://timgthomas.com/2013/10/feature-folders-and-javascript/">Feature Folders and JavaScript</a></li>
<li><a href="http://www.chwe.at/2014/04/introducing-the-asp.net-mvc-feature-folders-project-structure/">Introducing the ASP.NET MVC “Feature Folders” Project Structure</a></li>
<li><a href="http://www.meadow.se/wordpress/grouping-by-feature-in-asp-net-mvc/">Grouping by feature in ASP.Net MVC</a></li>
<li><a href="http://developer.7digital.com/blog/obvious-architecture">The Obvious Architecture</a></li>
<li><a href="http://trycatchfail.com/blog/post/A-View-Engine-for-ASPNET-MVC-Feature-Based-Organized">A View Engine for ASP.NET MVC Feature-Based Organized</a></li>
<li><a href="http://www.planetgeek.ch/2012/01/25/3077/">Structure your code by feature</a></li>
<li><a href="https://spin.atomicobject.com/2015/11/18/feature-oriented-c-sharp-structure/">A Feature-Oriented Directory Structure For C# Projects</a></li>
</ul>
<p>Also, <em>EPiServer&#39;s</em> <em>Commerce</em> starter site - <a href="https://github.com/episerver/Quicksilver">Quicksilver</a> uses <em>Feature folders</em>.</p>
<p>Both <em>Areas</em> and <em>Feature folders</em> separate the code by features, so I will refer to both as <em>Feature folders</em>.</p>
<p>Further, I am going to show analysis of dependencies between components in both approaches. I created two <em>EPiServer</em> <em>Alloy Tech</em> sites where the first one is left untouched, but the   second one is refactored into <em>Feature folders</em>.</p>
<h1 id="dependency-structure-matrix">Dependency Structure Matrix</h1>
<p>For analysis, I used <a href="http://www.ndepend.com/docs/dependency-structure-matrix-dsm">Dependency Structure Matrix</a> and used the evaluation version of <a href="http://www.ndepend.com/">NDepend</a> to create it. Below is a sample matrix.</p>
<p><img src="/img/2016-02/dsm-sample.png" alt="Dependency Structure Matrix sample" class="img-responsive"></p>
<p>Rows and columns are <em>components</em> which can be assemblies, namespaces or types. Each <em>component</em> lives in column and row with the same index. Blue cells represent dependency when the <em>component</em> in the column is using the <em>component</em> in the row. Green cells represent opposite dependency. Black cells represent dependency cycle.</p>
<p>Read more about Dependency Structure Matrix on <a href="http://www.ndepend.com/docs/dependency-structure-matrix-dsm">NDepend page</a>.</p>
<h1 id="namespace-dependencies">Namespace dependencies</h1>
<p>First let&#39;s look at a higher level - dependencies between namespaces.</p>
<p>Below is a <em>Feature folders&#39;</em> namespace dependency matrix.</p>
<p><img src="/img/2016-02/feature-folders-namespace-dsm.png" alt="Feature folders' namespace dependency matrix." class="img-responsive"></p>
<p>From the <em>Features</em> namespace (inner square) it is easy to see that there are not many dependencies between different features. Only <em>Articles</em> and <em>PageLists</em>, <em>Start</em> and <em>Contacts</em> and <em>Start</em> and <em>Common.Blocks</em> have one-way dependencies which mean that namespaces within <em>Features</em> namespace have low coupling.</p>
<p>It is also visible that <em>Business</em>, <em>Base</em>, <em>Layout</em>, and <em>Media</em> are used by all features. There are few cyclic dependencies (in black). One is the shared layout and <em>IPageViewModel</em> used in <em>Alloy Tech</em>. I wrote about it <a href="http://marisks.net/2015/05/18/episerver-strongly-typed-layout-model-without-ipageview/">before</a>. And second is template render which defines custom views for some models.</p>
<p>Now lets look at <em>Tech folders</em>.</p>
<p><img src="/img/2016-02/tech-folders-namespace-dsm.png" alt="Tech folders' namespace dependency matrix." class="img-responsive"></p>
<p>While dependency matrix seems simpler, it shows heavy coupling between namespaces. From this view, it is possible to see that <em>Controllers</em> and <em>Business</em> are heavily dependent on <em>Models</em>. It is impossible to see which application&#39;s feature is dependent on other feature. But you can see that <em>Models</em> has <a href="http://www.ndepend.com/docs/dependency-structure-matrix-dsm#Layer">Layered</a> code structuring. Unfortunately <em>Controllers</em> and <em>Business</em> namespaces are not. Also, <em>Tech folders</em> have cyclic dependencies for same reasons as <em>Feature folders</em> have.</p>
<h1 id="type-dependencies">Type dependencies</h1>
<p>Let&#39;s look at <em>Feature folders&#39;</em> dependency matrix first.</p>
<p><img src="/img/2016-02/feature-folders-type-dsm.png" alt="Feature folders' type dependency matrix." class="img-responsive"></p>
<p>Also, here it is easy to see that features within <em>Features</em> namespace are quite independent - most of the dependencies are within namespace itself. You can spot those dependencies as squares on the diagonal. This matches code structure pattern - <a href="http://www.ndepend.com/docs/dependency-structure-matrix-dsm#Coupling">High Cohesion - Low Coupling</a>. As we know our applications should tend to have <a href="http://stackoverflow.com/a/14000957/660154">high cohesion and low coupling</a>.</p>
<p>Unfortunately, <em>Tech folders</em> do not have such pattern.</p>
<p><img src="/img/2016-02/tech-folders-type-dsm.png" alt="Tech folders' type dependency matrix." class="img-responsive"></p>
<p>From this matrix, you can see that dependencies for a particular feature are spread over different namespaces. This matrix also shows that <em>Tech folders</em> are quite badly <a href="http://www.ndepend.com/docs/dependency-structure-matrix-dsm#Layer">layered</a>. In the layered structure most of the blue cells should be in the lower left triangle but green ones in the upper-right triangle. <em>Feature folders</em> have better-layered structuring.</p>
<h1 id="summary">Summary</h1>
<p>From this <em>Feature folder</em> and <em>Tech folder</em> comparison, it is quite easy to understand the benefits of <em>Feature folders</em> and why <em>Tech folders</em> should be used only for demos or application prototypes. <em>Feature folders</em> provide lower coupling same time grouping related code together. The only disadvantage using <em>Feature folders</em> is that frameworks do not &quot;understand&quot; those by default - you might need to configure those for your needs.</p>
</article><div id="disqus_thread"></div><script>/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'marisksblog'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><noscript>Please enable JavaScript to view the<a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a><a href="http://disqus.com" class="dsq-brlink">comments powered by<span class="logo-disqus">Disqus</span></a></noscript></div><div class="col-sm-1"><aside class="archive"><ul class="nav"><li><a href="/">2021</a></li><li><a href="/2020/">2020</a></li><li><a href="/2019/">2019</a></li><li><a href="/2018/">2018</a></li><li><a href="/2017/">2017</a></li><li class="active"><a href="/2016/">2016</a></li><li><a href="/2015/">2015</a></li><li><a href="/2014/">2014</a></li><li><a href="/2013/">2013</a></li><li><a href="/2012/">2012</a></li></ul></aside></div><div class="col-sm-3"><aside class="panel panel-default"><div class="panel-body"><div class="about"><img src="/img/common/profile_0021.jpg" alt="profile picture" class="center-block img-responsive thumbnail"><p>Hi! I'm Māris Krivtežs. I am Web developer primarily working with ASP.NET, EPiServer and front-end development at&nbsp;<a href="http://geta.no" target="_blank">Geta</a>, but same time learning different programming languages, learning new programming paradigms, architectures, and design. I spend my free time with my family, reading books, bicycling and traveling.</p></div><ul class="social"><li><a href="http://stackoverflow.com/users/660154/marisks" target="_blank"><i class="fa fa-stack-overflow"></i></a></li><li><a href="https://github.com/marisks" target="_blank"><i class="fa fa-github-alt"></i></a></li><li><a href="https://twitter.com/pioners1001" target="_blank"><i class="fa fa-twitter"></i></a></li><li><a href="http://www.linkedin.com/pub/maris-krivtezs/31/98b/b53" target="_blank"><i class="fa fa-linkedin"></i></a></li><li><a href="/rss.xml" target="_blank"><i class="fa fa-rss"></i></a></li></ul><a href="https://getadigital.com" target="_blank"><img src="/img/common/ident-geta-wordmark.svg" alt="Geta logo" class="center-block img-responsive aside-logo"></a></div></aside></div></div></div></div><div id="footer"><div class="container"><div class="container credit">Copyright &copy; 2017 Maris Krivtezs. All Rights Reserved, except for the parts enumerated below:<ul class="licence-list"><li>- The source code examples on this blog are covered by&nbsp;<a href="https://opensource.org/licenses/mit-license.php">MIT License</a>.</li><li>- This page content, excluding the visual design and the logotype, is covered by&nbsp;<a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</li></ul></div></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><script>window.jQuery || document.write('<script src="/js/vendor/jquery-1.10.2.min.js"><\/script>')</script><script  src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script><script  src="/js/plugins.js"></script><script  src="/js/main.js"></script></body>