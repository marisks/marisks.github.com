<!DOCTYPE html><!--if lt IE 8html.no-js.lt-ie9.lt-ie8(lang="en")--><!--if IE 8html.no-js.lt-ie9(lang="en")--><!--if gt IE 8html.no-js(lang="en")--><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>marisks # code</title><meta name="description" content="blog about .NET, JavaScript, Web, Optimizely (ex Episerver) and programming languages"><meta name="keywords" content=".NET, ASP.NET, C#, JavaScript, Optimizely, EPiServer, programming languages"><meta name="viewport" content="width=device-width, initial-scale=1"><!--Place favicon.ico and apple-touch-icon.png in the root directory--><meta name="generator" content="DocPad v6.79.4" /><!-- Google Tag Manager--><script async src="https://www.googletagmanager.com/gtag/js?id=G-540M01NJGH"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-540M01NJGH');</script><!-- End Google Tag Manager--><link rel="icon" sizes="16x16 32x32" href="/favicon.ico?v=1"><link  rel="stylesheet" href="/css/vendor/normalize.css" /><link  rel="stylesheet" href="/css/vendor/main.css" /><link  rel="stylesheet" href="/css/vendor/bootstrap.min.css" /><link  rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" /><link  rel="stylesheet" href="/css/style.css" /><script src="/js/vendor/modernizr-2.6.2.min.js"></script></head><body><!-- Google Tag Manager--><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-WDKMR7" height="0" width="0" style="display: none; visibility: hidden;"></iframe></noscript><!-- End Google Tag Manager--><!--if lt IE 8p.browsehappy
    |You are using an
    strong
        |outdated browser
    |. Please
    a(href="http://browsehappy.com/")
        |upgrade your browser
    |to improve your experience.
--><div id="wrap"><div role="navigation" class="navbar navbar-ornament navbar-fixed-top"><div class="container"><div class="navbar-header"><a href="/" class="navbar-brand">marisks # code</a></div></div></div><div class="container"><div class="row"><div class="col-sm-8"><article><header><h1><a href="/2017/12/18/handler-for-cms11-is-out/"> 404 handler for CMS 11 is out</a></h1><p class="meta"><time datetime="2017-12-18T00:00:00.000Z">Mon Dec 18 2017</time></p></header><div class="entry-content"><p>Last week we at Geta released a new version of the 404 handler.</p>

</div></article><article><header><h1><a href="/2017/12/17/better-feature-folders/"> Better feature folders</a></h1><p class="meta"><time datetime="2017-12-17T00:00:00.000Z">Sun Dec 17 2017</time></p></header><div class="entry-content"><p>Previously, I wrote an article how to create a <a href="/2017/02/03/razor-view-engine-for-feature-folders/">Razor view engine which supports feature folders</a>. This view engine had one drawback.</p>

</div></article><article><header><h1><a href="/2017/11/23/dependency-injection-recipe-for-episerver-developer/"> Dependency injection recipe for Episerver developer</a></h1><p class="meta"><time datetime="2017-11-23T00:00:00.000Z">Thu Nov 23 2017</time></p></header><div class="entry-content"><p>Choosing proper dependency injection type might be hard. But it is not so hard when you have a recipe.</p>

</div></article><article><header><h1><a href="/2017/11/10/forcing-episerver-visitor-group-check-in-preview/"> Forcing Episerver visitor group check in a preview</a></h1><p class="meta"><time datetime="2017-11-10T00:00:00.000Z">Fri Nov 10 2017</time></p></header><div class="entry-content"><p>Jacob Khan has written an article how to <a href="https://world.episerver.com/blogs/Jacob-Khan/Dates/2016/4/preview-content-in-view-mode/">preview content in a View Mode</a>. While this works fine, it ignores visitor groups.</p>

</div></article><article><header><h1><a href="/2017/10/30/episerver-ui-tests-with-canopy/"> Episerver UI tests with canopy</a></h1><p class="meta"><time datetime="2017-10-30T00:00:00.000Z">Mon Oct 30 2017</time></p></header><div class="entry-content"><p>Several months ago I wrote an article about <a href="/2017/03/12/ui-testing-basics-in-episerver/">UI testing basics in Episerver</a>. This is more practical article how to implement these basic principles using <a href="https://lefthandedgoat.github.io/canopy/">canopy</a> testing framework.</p>

</div></article><article><header><h1><a href="/2017/10/19/fixing-dds-mapping-issue/"> Fixing DDS mapping issue</a></h1><p class="meta"><time datetime="2017-10-19T00:00:00.000Z">Thu Oct 19 2017</time></p></header><div class="entry-content"><p>Time to time I am getting an issue with DDS mapping mismatch. In this article, I will show the possible solutions.</p>

</div></article><article><header><h1><a href="/2017/09/28/market-routing-in-episerver-commerce/"> Market routing in Episerver Commerce</a></h1><p class="meta"><time datetime="2017-09-28T00:00:00.000Z">Thu Sep 28 2017</time></p></header><div class="entry-content"><p>The most of the Episerver Commerce project examples (for example, <a href="https://github.com/episerver/Quicksilver/">Quicksilver</a>) are using cookies to store selected market. The URL doesn&#39;t change which can cause several SEO issues. Crawlers are not able to index market specific content. If the market info could be included in the URL, it would solve most of these problems.</p>

</div></article><article><header><h1><a href="/2017/09/19/new-relation-apis-in-commerce-11/"> New relation APIs in Episerver Commerce 11</a></h1><p class="meta"><time datetime="2017-09-19T00:00:00.000Z">Tue Sep 19 2017</time></p></header><div class="entry-content"><p>Recently, Episerver has changed relation APIs. Now those are easier to understand and use.</p>

</div></article><article><header><h1><a href="/2017/09/07/category-sorting-in-episerver-commerce/"> Category sorting in Episerver Commerce</a></h1><p class="meta"><time datetime="2017-09-07T00:00:00.000Z">Thu Sep 07 2017</time></p></header><div class="entry-content"><p>Recently Episerver released Commerce 11. It contains a new feature - <a href="http://world.episerver.com/documentation/Release-Notes/ReleaseNote/?releaseNoteId=COM-13">a product sorting</a>. But unfortunately, there is <a href="http://world.episerver.com/forum/developer-forum/Episerver-Commerce/Thread-Container/2017/8/category-sorting-in-commerce-11/">no way to sort categories</a>.</p>

</div></article><article><header><h1><a href="/2017/07/31/episerver-razor-view-support-in-shell-modules/"> Episerver Razor view support in Shell modules</a></h1><p class="meta"><time datetime="2017-07-31T00:00:00.000Z">Mon Jul 31 2017</time></p></header><div class="entry-content"><p>A few months ago I created a <a href="/2017/03/19/enable-razor-views-in-episerver-modules-with-shellrazorsupport-package/">library</a> which enabled Razor views in Episerver Shell modules. Now Episerver has built <a href="http://world.episerver.com/documentation/Release-Notes/ReleaseNote/?releaseNoteId=CMS-1506">support for it by default</a>.</p>

</div></article><article><header><h1><a href="/2017/07/13/programmatically-upload-image-to-episerver/"> Programmatically upload image to Episerver</a></h1><p class="meta"><time datetime="2017-07-13T00:00:00.000Z">Thu Jul 13 2017</time></p></header><div class="entry-content"><p>When importing data into Episerver - CMS or Commerce, it is a common task to upload images. In this article I will show how to do it from the remote URL.</p>

</div></article><article><header><h1><a href="/2017/06/09/epievents-a-library-for-simpler-episerver-event-handling/"> EpiEvents - a library for simpler Episerver event handling</a></h1><p class="meta"><time datetime="2017-06-09T00:00:00.000Z">Fri Jun 09 2017</time></p></header><div class="entry-content"><p>A few months ago I wrote an <a href="/2017/02/12/better-event-handling-in-episerver/">article</a> about better event handling. Now I have created and published a library which allows you to handle Episerver events in this way easier.</p>

</div></article><article><header><h1><a href="/2017/06/06/tips-for-working-with-episerver-commerce-customers/"> Tips for working with Episerver Commerce customers</a></h1><p class="meta"><time datetime="2017-06-06T00:00:00.000Z">Tue Jun 06 2017</time></p></header><div class="entry-content"><p>Last week I was working on the custom user interface for customer management and discovered two useful tips which help to work with customers in Episerver.</p>

</div></article><article><header><h1><a href="/2017/05/31/automating-episerver-website-configuration/"> Automating Episerver website configuration</a></h1><p class="meta"><time datetime="2017-05-31T00:00:00.000Z">Wed May 31 2017</time></p></header><div class="entry-content"><p>When you have multiple environments - for production, staging, and testing, there is a need to copy over production environment data to staging and testing environments. In Episerver this is quite easy - just copy over database and blobs. But you have to update Episerver website configuration to match your staging/test environment setup. You have to change website URL and add hostnames for your new environment. This can be done in a user interface, but it is better to automate.</p>

</div></article><article><header><h1><a href="/2017/05/23/episerver-commerce-content-version-preview/"> Episerver commerce content version preview</a></h1><p class="meta"><time datetime="2017-05-23T00:00:00.000Z">Tue May 23 2017</time></p></header><div class="entry-content"><p>Episerver has preview functionality available in edit mode. It did not satisfy our customer. The customer wanted to see the page as it will be displayed when get published. But I found that Episerver has &quot;hidden&quot; feature which enables you to display concrete commerce content version.</p>

</div></article><article><header><h1><a href="/2017/05/14/changing-static-resource-urls-to-cdn-urls-with-url-rewrite/"> Changing static resource URLs to CDN URLs with URL Rewrite</a></h1><p class="meta"><time datetime="2017-05-14T00:00:00.000Z">Sun May 14 2017</time></p></header><div class="entry-content"><p>Recently I was configuring a CDN in Azure for one of our projects. We needed to serve most of the static content (images and scripts) from the CDN to improve page load times. After the CDN had been set up, I had to change the content URLs to point to the CDN. There are several options to do it. You might handle it directly in the code, rewrite all URLs in some handler or as I did with URL rewrite.</p>

</div></article><article><header><h1><a href="/2017/04/30/basic-razor-layout-for-episerver-module/"> Basic Razor layout for Episerver module</a></h1><p class="meta"><time datetime="2017-04-30T00:00:00.000Z">Sun Apr 30 2017</time></p></header><div class="entry-content"><p>When creating Episerver modules, you need a common layout for your pages. You can find different examples of Web Forms layout for Episerver modules, but as now with <a href="http://marisks.net/2017/03/19/enable-razor-views-in-episerver-modules-with-shellrazorsupport-package/">Geta&#39;s shell razor support package</a> it is possible to create Razor views, you need a Razor layout.</p>

</div></article><article><header><h1><a href="/2017/04/24/nuget-package-creation-with-fake/"> NuGet package creation with FAKE</a></h1><p class="meta"><time datetime="2017-04-24T00:00:00.000Z">Mon Apr 24 2017</time></p></header><div class="entry-content"><p>Recently, I was creating a library package for Episerver and required to create a NuGet package. Usually, at Geta we have a Team City configuration for project builds and NuGet package creation. But this time I was creating my package. While it is possible just to package your project with nuget.exe directly, it would need too many manual steps when releasing a new version of your package. In this article, I will show how to use <a href="http://fsharp.github.io/FAKE/">FAKE</a> for this purpose.</p>

</div></article><article><header><h1><a href="/2017/04/09/manual-order-discount/"> Manual order discount</a></h1><p class="meta"><time datetime="2017-04-09T00:00:00.000Z">Sun Apr 09 2017</time></p></header><div class="entry-content"><p>Last week I had a requirement to implement a manual order discount which can be set on any cart by the administrator/editor. I found that there is a manual discount for line items in the Commerce Manager and found how to use those in my code. When I tried to implement it the same way for the order discount, then <a href="http://world.episerver.com/forum/developer-forum/Episerver-Commerce/Thread-Container/2017/4/how-to-add-manual-order-promotion/">it didn&#39;t work</a>. The order discount requires a different approach which is described in this article.</p>

</div></article><article><header><h1><a href="/2017/04/02/calling-async-methods-within-episerver-events/"> Calling async methods within Episerver events</a></h1><p class="meta"><time datetime="2017-04-02T00:00:00.000Z">Sun Apr 02 2017</time></p></header><div class="entry-content"><p>In the article <a href="/2017/02/12/better-event-handling-in-episerver/">Better event handling in Episerver</a>, I wrote how to handle <em>Episerver</em> events. I was calling the async <em>Publish</em> method of mediator in the fire and forget manner. But it is not a good solution in an ASP.NET application as there is no warranty that <a href="http://stackoverflow.com/a/18509424/660154">the running task will finish</a>.</p>

</div></article><article><header><h1><a href="/2017/03/19/enable-razor-views-in-episerver-modules-with-shellrazorsupport-package/"> Enable Razor views in Episerver modules with Geta.EPi.ShellRazorSupport package</a></h1><p class="meta"><time datetime="2017-03-19T00:00:00.000Z">Sun Mar 19 2017</time></p></header><div class="entry-content"><p>Two weeks ago I wrote an <a href="/2017/03/05/configuring-razor-view-support-for-episerver-modules/">article</a> how to enable Razor views in Episerver modules. Now we created and published a module which does it for you.</p>

</div></article><article><header><h1><a href="/2017/03/12/ui-testing-basics-in-episerver/"> UI testing basics in Episerver</a></h1><p class="meta"><time datetime="2017-03-12T00:00:00.000Z">Sun Mar 12 2017</time></p></header><div class="entry-content"><p>I haven&#39;t done UI testing much as I found it quite unreliable, hardly maintainable and hard to write. But there are still some cases when it is useful to have some UI tests.</p>

</div></article><article><header><h1><a href="/2017/03/05/configuring-razor-view-support-for-episerver-modules/"> Configuring Razor view support for Episerver modules</a></h1><p class="meta"><time datetime="2017-03-05T00:00:00.000Z">Sun Mar 05 2017</time></p></header><div class="entry-content"><p>I have not created an Episerver module before. When I started on one last week, I found that there are no examples with Razor views. After looking and trying to create a module, concluded that it even doesn&#39;t support Razor views by default. But I figured out one way which works.</p>

</div></article><article><header><h1><a href="/2017/02/26/testing-events/"> Testing events</a></h1><p class="meta"><time datetime="2017-02-26T00:00:00.000Z">Sun Feb 26 2017</time></p></header><div class="entry-content"><p>Previously, I wrote an <a href="/2017/02/12/better-event-handling-in-episerver/">article</a> how to handle events in the Episerver but I did not show how to test those. I am a fan of the Test Driven Development but when working with the Episerver it is quite hard to test the code including .NET event testing. Developers tend to not write unit tests for those. In this article, I will show that this is quite easy when using the right tools.</p>

</div></article><article><header><h1><a href="/2017/02/19/how-to-save-not-publish-catalog-content-properly/"> How to save (not publish) catalog content properly</a></h1><p class="meta"><time datetime="2017-02-19T00:00:00.000Z">Sun Feb 19 2017</time></p></header><div class="entry-content"><p>Usually, when importing or updating categories, products or variations I have published those immediately and never had any issues. But recently had an issue when a customer wanted to publish updated products manually. I had to save those without publishing but didn&#39;t get anything saved - at least no info was visible in the UI.</p>

</div></article><article><header><h1><a href="/2017/02/12/better-event-handling-in-episerver/"> Better event handling in Episerver</a></h1><p class="meta"><time datetime="2017-02-12T00:00:00.000Z">Sun Feb 12 2017</time></p></header><div class="entry-content"><p>In January I wrote an <a href="/2017/01/22/episerver-content-events-explained/">article</a> which documented Episerver content events. As it was seen from this article, there are plenty of events available and those have different event arguments with different properties where not all of those properties are used. This makes the API hard to use.</p>

</div></article><article><header><h1><a href="/2017/02/03/razor-view-engine-for-feature-folders/"> Razor view engine for feature folders</a></h1><p class="meta"><time datetime="2017-02-03T00:00:00.000Z">Fri Feb 03 2017</time></p></header><div class="entry-content"><p>There are some resources available which explain how to configure razor view engine to support feature folders. But most of these resources describe how to do it in an ordinary <em>MVC</em> project. Episerver projects have some limitations which I took into account in this article. This article also covers a sub-folder support.</p>

</div></article><article><header><h1><a href="/2017/01/29/feature-sub-tech-folders-vs-feature-sub-features/"> A feature's sub-tech folders vs sub-feature folders</a></h1><p class="meta"><time datetime="2017-01-29T00:00:00.000Z">Sun Jan 29 2017</time></p></header><div class="entry-content"><p>Almost a year ago I wrote an <a href="/2016/02/16/feature-folders-vs-tech-folders/">article</a> about feature folders vs tech folders. I explained why you should favor feature folders vs tech folders. While I see this style of architecture more and more, I also see that developers use tech folders inside feature folders. In this article, I am going to describe alternatives to this type of structure.</p>

</div></article><article><header><h1><a href="/2017/01/22/episerver-content-events-explained/"> Episerver Content Events Explained</a></h1><p class="meta"><time datetime="2017-01-22T00:00:00.000Z">Sun Jan 22 2017</time></p></header><div class="entry-content"><p>There are times when you need to be notified about some actions happening in the Episerver and execute the code when it happens. Episerver has built-in events which help to achieve it. In this article, I will describe content events which are implemented through IContentEvents interface.</p>

</div></article><article><header><h1><a href="/2017/01/12/di-within-initializable-modules/"> Dependency Injection within Initialization Modules</a></h1><p class="meta"><time datetime="2017-01-12T00:00:00.000Z">Thu Jan 12 2017</time></p></header><div class="entry-content"><p>In the <a href="/2017/01/09/episerver-di-status/">last article</a>, I did not mention <a href="http://world.episerver.com/documentation/Items/Developers-Guide/Episerver-CMS/9/Initialization/Creating-an-initialization-module/">Initialization Modules</a>. Those also do not support a constructor injection but <em>Initialization Modules</em> are different.</p>

</div></article><article><header><h1><a href="/2017/01/09/episerver-di-status/"> Episerver Dependency Injection status</a></h1><p class="meta"><time datetime="2017-01-09T00:00:00.000Z">Mon Jan 09 2017</time></p></header><div class="entry-content">Episerver just released a new version which added a constructor injection support in scheduled jobs. It encouraged me to create a list of different Episerver infrastructure parts which still do not support a constructor injection.</div></article></div><div class="col-sm-1"><aside class="archive"><ul class="nav"><li><a href="/">2021</a></li><li><a href="/2020/">2020</a></li><li><a href="/2019/">2019</a></li><li><a href="/2018/">2018</a></li><li class="active"><a href="/2017/">2017</a></li><li><a href="/2016/">2016</a></li><li><a href="/2015/">2015</a></li><li><a href="/2014/">2014</a></li><li><a href="/2013/">2013</a></li><li><a href="/2012/">2012</a></li></ul></aside></div><div class="col-sm-3"><aside class="panel panel-default"><div class="panel-body"><div class="about"><img src="/img/common/profile_0021.jpg" alt="profile picture" class="center-block img-responsive thumbnail"><p>Hi! I'm Māris Krivtežs. I am Web developer primarily working with ASP.NET, EPiServer and front-end development at&nbsp;<a href="http://geta.no" target="_blank">Geta</a>, but same time learning different programming languages, learning new programming paradigms, architectures, and design. I spend my free time with my family, reading books, bicycling and traveling.</p></div><ul class="social"><li><a href="http://stackoverflow.com/users/660154/marisks" target="_blank"><i class="fa fa-stack-overflow"></i></a></li><li><a href="https://github.com/marisks" target="_blank"><i class="fa fa-github-alt"></i></a></li><li><a href="https://twitter.com/pioners1001" target="_blank"><i class="fa fa-twitter"></i></a></li><li><a href="http://www.linkedin.com/pub/maris-krivtezs/31/98b/b53" target="_blank"><i class="fa fa-linkedin"></i></a></li><li><a href="/rss.xml" target="_blank"><i class="fa fa-rss"></i></a></li></ul><a href="https://getadigital.com" target="_blank"><img src="/img/common/ident-geta-wordmark.svg" alt="Geta logo" class="center-block img-responsive aside-logo"></a></div></aside></div></div></div></div><div id="footer"><div class="container"><div class="container credit">Copyright &copy; 2017 Maris Krivtezs. All Rights Reserved, except for the parts enumerated below:<ul class="licence-list"><li>- The source code examples on this blog are covered by&nbsp;<a href="https://opensource.org/licenses/mit-license.php">MIT License</a>.</li><li>- This page content, excluding the visual design and the logotype, is covered by&nbsp;<a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</li></ul></div></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><script>window.jQuery || document.write('<script src="/js/vendor/jquery-1.10.2.min.js"><\/script>')</script><script  src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script><script  src="/js/plugins.js"></script><script  src="/js/main.js"></script></body>