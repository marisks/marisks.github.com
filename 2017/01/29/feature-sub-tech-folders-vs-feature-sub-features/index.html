<!DOCTYPE html><!--if lt IE 8html.no-js.lt-ie9.lt-ie8(lang="en")--><!--if IE 8html.no-js.lt-ie9(lang="en")--><!--if gt IE 8html.no-js(lang="en")--><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>A feature's sub-tech folders vs sub-feature folders | marisks # code</title><meta name="description" content="Almost a year ago I wrote an article about feature folders vs tech folders. I explained why you should favor feature folders vs tech folders. While I see this style of architecture more and more, I also see that developers use tech folders inside feature folders. In this article, I am going to describe alternatives to this type of structure."><meta name="keywords" content=".NET, ASP.NET, C#, JavaScript, Optimizely, EPiServer, programming languages"><meta name="viewport" content="width=device-width, initial-scale=1"><!--Place favicon.ico and apple-touch-icon.png in the root directory--><meta name="generator" content="DocPad v6.79.4" /><!-- Google Tag Manager--><script async src="https://www.googletagmanager.com/gtag/js?id=G-540M01NJGH"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-540M01NJGH');</script><!-- End Google Tag Manager--><link rel="icon" sizes="16x16 32x32" href="/favicon.ico?v=1"><link  rel="stylesheet" href="/css/vendor/normalize.css" /><link  rel="stylesheet" href="/css/vendor/main.css" /><link  rel="stylesheet" href="/css/vendor/bootstrap.min.css" /><link  rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" /><link  rel="stylesheet" href="/css/style.css" /><script src="/js/vendor/modernizr-2.6.2.min.js"></script></head><body><!-- Google Tag Manager--><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-WDKMR7" height="0" width="0" style="display: none; visibility: hidden;"></iframe></noscript><!-- End Google Tag Manager--><!--if lt IE 8p.browsehappy
    |You are using an
    strong
        |outdated browser
    |. Please
    a(href="http://browsehappy.com/")
        |upgrade your browser
    |to improve your experience.
--><div id="wrap"><div role="navigation" class="navbar navbar-ornament navbar-fixed-top"><div class="container"><div class="navbar-header"><a href="/" class="navbar-brand">marisks # code</a></div></div></div><div class="container"><div class="row"><div class="col-sm-8"><article><header><h1>A feature's sub-tech folders vs sub-feature folders</h1><p class="meta"><time datetime="2017-01-29T00:00:00.000Z">Sun Jan 29 2017</time></p></header><div class="lead"><p>Almost a year ago I wrote an <a href="/2016/02/16/feature-folders-vs-tech-folders/">article</a> about feature folders vs tech folders. I explained why you should favor feature folders vs tech folders. While I see this style of architecture more and more, I also see that developers use tech folders inside feature folders. In this article, I am going to describe alternatives to this type of structure.</p>

</div><h1 id="sub-tech-folders">Sub-tech folders</h1>
<p>So how do sub-tech folders look like? Developers structure their MVC application into feature folders but one level below that starts adding different folders specific to MVC - <em>ViewModels</em>, <em>Controllers</em>, <em>Models</em>, <em>Views</em>. Also, there might be other technical folders like - <em>Services</em>, <em>Interfaces</em>, <em>Implementations</em>, <em>Repositories</em> etc. At the end, feature folder will look like this:</p>
<p><img src="/img/2017-01/sub-tech-folders.png" class="img-responsive" alt="Sub-tech folder structure in the solution explorer"></p>
<p>Now a feature folder looks like a small MVC application. This looks better than before with huge MVC application where everything goes into these tech folders but still, tech folders hide your application purpose.</p>
<p>There are several issues with this approach. As I mentioned, it hides the purpose of your application and with feature folders - specific feature&#39;s main components. See <a href="https://github.com/episerver/Quicksilver/tree/ce8274120ac63f01de57c1500a7c8f9ddffd9400/Sources/EPiServer.Reference.Commerce.Site/Features/Cart">Quicksilver&#39;s Cart feature</a> - the structure looks like in the typical MVC application and it is impossible to say what are the main components of this feature.</p>
<p>Another issue is that it hides smaller features. It is really easy to add multiple features into one feature folder. Yes, those now are grouped and easier to find but those still mixes different features. Same <a href="https://github.com/episerver/Quicksilver/tree/ce8274120ac63f01de57c1500a7c8f9ddffd9400/Sources/EPiServer.Reference.Commerce.Site/Features/Cart/Controllers">Quicksilver&#39;s Cart feature</a> hides <em>Wishlist</em>.</p>
<p>Sub-tech folders also make closely related code be separated. For example, I&#39;ve seen where interfaces are explicitly put into a different folder than implementations - <em>Interfaces</em> and <em>Implementations</em>. This makes harder to reason about the code. Another example can be found in the <a href="https://github.com/episerver/Quicksilver/tree/ce8274120ac63f01de57c1500a7c8f9ddffd9400/Sources/EPiServer.Reference.Commerce.Site/Features/Cart">Quicksilver</a> - view model factories are separated from view models which those factories are creating.</p>
<p>Then comes the issue with any other type of code. How one will call the tech folder where the class doesn&#39;t fit in the existing tech folders? Maybe call it <em>Others</em> or <em>Classes</em>? It sounds weird. So developers tend to not extract separate classes even if it would lead to a better design but keep all the logic in controllers, views, models etc. Then we see huge controllers which are hard to maintain.</p>
<h1 id="no-sub-folders">No sub-folders</h1>
<p>Another option - do not use any sub-folders and place everything in the root of the feature folder. This is a most common approach dealing with feature folders. You can find examples of that in the <a href="https://scottsauber.com/2016/04/25/feature-folder-structure-in-asp-net-core/">Scott Sauber&#39;s blog</a>, <a href="https://vimeo.com/131633177">Jimmy Bogard&#39;s talk</a> and more.</p>
<p><img src="/img/2017-01/no-subfolders.png" class="img-responsive" alt="No sub-folder structure in the solution explorer"></p>
<p>While it works and works fine, in the <em>Episerver</em> projects it might get quite messy as the pages might have quite complex views with lots of partial views. Also, front-end code for these views will get into the feature folder and make it messier.</p>
<h1 id="sub-feature-folders">Sub-feature folders</h1>
<p>The sub-feature folder is the concept of splitting your feature into smaller ones. You might have checkout feature which could be split into shipment, billing, order confirmation etc. sub-features. So creating a separate folder for each of these sub-features makes it much easier to reason about the code.</p>
<p>It might look like this:</p>
<p><img src="/img/2017-01/sub-feature-folders.png" class="img-responsive" alt="Sub-feature folder structure in the solution explorer"></p>
<p>There are some disadvantages. It is hard to configure MVC to pick up views from the sub-feature folders. Also, it still keeps all the front-end stuff together with the back-end.</p>
<h1 id="solution">Solution</h1>
<p>So if tech sub-folders are not good, without sub-folders it might get messy, and feature sub-folders have their own issues, what is the solution? It depends. It depends on your project - how complex it is, how complex your views are etc.</p>
<p>You can mix different concepts together. Find what matches your needs. I will give you few hints.</p>
<h2 id="tech-and-feature-sub-folder-mix">Tech and feature sub-folder mix</h2>
<p>The reason why tech sub-folders are bad is because developers tend to create those too granular. It is enough to separate just bigger concepts. For example, create a separate folder for views if you have a lot of them or create a separate folder for models. But do not split it more granularly.</p>
<p>With feature sub-folders, do not be afraid to mix in some tech folders if it becomes too messy. Add a separate folder for views, models etc. in the feature sub-folder.</p>
<p><img src="/img/2017-01/mix-folders.png" class="img-responsive" alt="Sub-tech and sub-feature folder structure in the solution explorer"></p>
<h2 id="layered-approach">Layered approach</h2>
<p>With bigger and really complex applications which have a lot of business logic, it is wise to separate those into layers according to <a href="https://en.wikipedia.org/wiki/Domain-driven_design">Domain Driven Design</a>. There is a good book - <a href="https://www.amazon.com/Implementing-Domain-Driven-Design-Vaughn-Vernon-ebook/dp/B00BCLEBN8/">Implementing Domain-Driven Design</a> which describes this approach well.</p>
<p>Basically, separate your domain, application, UI, data access etc. logic within the feature. It might be separated within feature folder or split into separate assemblies.</p>
<p>When separating these concepts in the feature folder, it might look like this:</p>
<p><img src="/img/2017-01/layered-folders.png" class="img-responsive" alt="Layered folder structure in the solution explorer"></p>
<h1 id="summary">Summary</h1>
<p>There are different ways how you can structure your code but the main goal is to keep it easy to work with. You can achieve it different ways but keep in mind that the &quot;feature&quot; is a main concept.</p>
</article><div id="disqus_thread"></div><script>/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'marisksblog'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><noscript>Please enable JavaScript to view the<a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a><a href="http://disqus.com" class="dsq-brlink">comments powered by<span class="logo-disqus">Disqus</span></a></noscript></div><div class="col-sm-1"><aside class="archive"><ul class="nav"><li><a href="/">2021</a></li><li><a href="/2020/">2020</a></li><li><a href="/2019/">2019</a></li><li><a href="/2018/">2018</a></li><li class="active"><a href="/2017/">2017</a></li><li><a href="/2016/">2016</a></li><li><a href="/2015/">2015</a></li><li><a href="/2014/">2014</a></li><li><a href="/2013/">2013</a></li><li><a href="/2012/">2012</a></li></ul></aside></div><div class="col-sm-3"><aside class="panel panel-default"><div class="panel-body"><div class="about"><img src="/img/common/profile_0021.jpg" alt="profile picture" class="center-block img-responsive thumbnail"><p>Hi! I'm Māris Krivtežs. I am Web developer primarily working with ASP.NET, EPiServer and front-end development at&nbsp;<a href="http://geta.no" target="_blank">Geta</a>, but same time learning different programming languages, learning new programming paradigms, architectures, and design. I spend my free time with my family, reading books, bicycling and traveling.</p></div><ul class="social"><li><a href="http://stackoverflow.com/users/660154/marisks" target="_blank"><i class="fa fa-stack-overflow"></i></a></li><li><a href="https://github.com/marisks" target="_blank"><i class="fa fa-github-alt"></i></a></li><li><a href="https://twitter.com/pioners1001" target="_blank"><i class="fa fa-twitter"></i></a></li><li><a href="http://www.linkedin.com/pub/maris-krivtezs/31/98b/b53" target="_blank"><i class="fa fa-linkedin"></i></a></li><li><a href="/rss.xml" target="_blank"><i class="fa fa-rss"></i></a></li></ul><a href="https://getadigital.com" target="_blank"><img src="/img/common/ident-geta-wordmark.svg" alt="Geta logo" class="center-block img-responsive aside-logo"></a></div></aside></div></div></div></div><div id="footer"><div class="container"><div class="container credit">Copyright &copy; 2017 Maris Krivtezs. All Rights Reserved, except for the parts enumerated below:<ul class="licence-list"><li>- The source code examples on this blog are covered by&nbsp;<a href="https://opensource.org/licenses/mit-license.php">MIT License</a>.</li><li>- This page content, excluding the visual design and the logotype, is covered by&nbsp;<a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</li></ul></div></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><script>window.jQuery || document.write('<script src="/js/vendor/jquery-1.10.2.min.js"><\/script>')</script><script  src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script><script  src="/js/plugins.js"></script><script  src="/js/main.js"></script></body>